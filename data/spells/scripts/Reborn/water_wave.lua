local waterWaveArea = {
	
	createCombatArea({
		{1, 1, 1},
		{1, 2, 1},
		{1, 1, 1}
	}),
	
	createCombatArea({
		{1, 0, 1, 0, 1},
		{0, 0, 0, 0, 0},
		{1, 0, 2, 0, 1},
		{0, 0, 0, 0, 0},
		{1, 0, 1, 0, 1}
	}),
	
	createCombatArea({
		{1, 0, 0, 1, 0, 0, 1},
		{0, 0, 0, 0, 0, 0, 0},
		{0, 0, 0, 0, 0, 0, 0},
		{1, 0, 0, 2, 0, 0, 1},
		{0, 0, 0, 0, 0, 0, 0},
		{0, 0, 0, 0, 0, 0, 0},
		{1, 0, 0, 1, 0, 0, 1}
	}),
	
	createCombatArea({
		{1, 0, 0, 0, 1, 0, 0, 0, 1},
		{0, 0, 0, 0, 0, 0, 0, 0, 0},
		{0, 0, 0, 0, 0, 0, 0, 0, 0},
		{0, 0, 0, 0, 0, 0, 0, 0, 0},
		{1, 0, 0, 0, 2, 0, 0, 0, 1},
		{0, 0, 0, 0, 0, 0, 0, 0, 0},
		{0, 0, 0, 0, 0, 0, 0, 0, 0},
		{0, 0, 0, 0, 0, 0, 0, 0, 0},
		{1, 0, 0, 0, 1, 0, 0, 0, 1}
	}),
	
	createCombatArea({
		{1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1},
		{0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
		{0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
		{0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
		{0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
		{0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
		{1, 0, 0, 0, 0, 2, 0, 0, 0, 0, 1},
		{0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
		{0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
		{0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
		{0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
		{1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1}
	}),
	
	createCombatArea({
		{1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1},
		{0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
		{0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
		{0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
		{0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
		{0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
		{0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
		{1, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 1},
		{0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
		{0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
		{0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
		{0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
		{0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
		{1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1}
	}),
	
	createCombatArea({
		{1, 0, 1, 1, 1, 1, 0, 1, 1, 1, 0, 1, 1},
		{1, 0, 1, 1, 1, 1, 0, 1, 1, 1, 0, 1, 1},
		{1, 1, 1, 1, 1, 1, 1, 1, 0, 1, 1, 1, 0},
		{0, 1, 1, 0, 1, 1, 0, 1, 0, 1, 1, 1, 0},
		{0, 1, 1, 0, 1, 0, 0, 1, 1, 1, 0, 1, 1},
		{1, 1, 0, 1, 1, 0, 1, 1, 1, 1, 0, 1, 1},
		{1, 0, 0, 1, 1, 1, 1, 1, 1, 0, 1, 1, 1},
		{1, 0, 1, 1, 1, 1, 2, 1, 1, 0, 1, 1, 0},
		{0, 1, 1, 1, 1, 1, 0, 1, 1, 1, 1, 1, 0},
		{0, 1, 1, 0, 0, 1, 0, 1, 1, 1, 1, 1, 1},
		{1, 0, 1, 0, 0, 1, 1, 1, 1, 0, 1, 1, 1},
		{1, 0, 1, 1, 1, 1, 1, 1, 1, 0, 1, 1, 1},
		{1, 0, 0, 0, 1, 0, 1, 0, 1, 1, 1, 0, 1},
		{1, 1, 0, 0, 1, 0, 1, 0, 1, 1, 1, 0, 1}
	})
}

function onGetFormulaValues(cid, level, skill, attack, factor)
	return -(((skill + 20) * 22) + (level * 50)), -(((skill + 20) * 22) + (level * 50))
end

local waterWave = {}
for k, area in ipairs(waterWaveArea) do
	waterWave[k] = createCombatObject()
	setCombatParam(waterWave[k], COMBAT_PARAM_TYPE, COMBAT_DROWNDAMAGE)
	setCombatParam(waterWave[k], COMBAT_PARAM_EFFECT, CONST_ME_WATERSPLASH)
	
	_G["callback1" .. k] = onGetFormulaValues
	setCombatCallback(waterWave[k], CALLBACK_PARAM_SKILLVALUE, "callback1" .. k)

	setCombatArea(waterWave[k], area)
end

local function castSpellDelay(p)
	doCombat(unpack(p))
end

function onCastSpell(cid, var)
	for k, area in ipairs(waterWave) do
		addEvent(castSpellDelay, 150 * k, {cid, waterWave[k], var})
	end
	return LUA_NO_ERROR
end